<?xml version="1.0" encoding="UTF-8" standalone="no"?>
2 	
3 	<project basedir="." default="compile_jml_source" name="spec">
4 	
5 	  <property name="main-project.location" value="../main-project" />
6 	  <property name="spec-project.location" value="." />
7 	
8 	  <path id="jml-libraries.classpath">
9 	    <pathelement location="${spec-project.location}/lib/jml/jml-release.jar" />
10 	    <pathelement location="${spec-project.location}/lib/jml/specs" />
11 	  </path>
12 	
13 	  <path id="main-project.classpath">
14 	    <pathelement location="${main-project.location}/bin" />
15 	    <pathelement location="${main-project.location}/lib/d2xxj/ftd2xxj.jar" />
16 	    <pathelement location="${main-project.location}/lib/d2xxj/javax.util.property.jar" />
17 	  </path>
18 	
19 	  <path id="jml.classpath">
20 	    <path refid="jml-libraries.classpath" />
21 	    <path refid="main-project.classpath" />
22 	  </path>
23 	  <property name="jml.classpath" refid="jml.classpath" />
24 	
25 	  <property name="jml.src" value="src" />
26 	  <property name="jml.rac.src.generated" value="jml/src.generated" />
27 	  <property name="jml.rac.src" value="jml/src" />
28 	  <property name="jml.rac.compiled" value="jml/bin" />
29 	 
30 	  <property name="jml.src.compile" value="ie.ucd.sensetile"/>
31 	 
32 	  <target name="clean">
33 	    <delete dir="${jml.rac.src.generated}" />
34 	    <delete dir="${jml.rac.src}" />
35 	    <delete dir="${jml.rac.compiled}" />
36 	  </target>
37 	 
38 	  <target name="init">
39 	    <mkdir dir="${jml.rac.src.generated}" />
40 	    <mkdir dir="${jml.rac.src}" />
41 	    <mkdir dir="${jml.rac.compiled}" />
42 	  </target>
43 	 
44 	  <target name="generate_jml_source" depends="init">
45 	    <property name="jml.debug" value="--debug" />
46 	    <property name="jml.warning" value="--warning" />
47 	    <property name="jml.assignable" value="--assignable" />
48 	    <property name="jml.recursive" value="--recursive" />
49 	    <property name="jml.source_code" value="--source 1.4" />
50 	    <property name="jml.print_source" value="--print" />
51 	    <java failonerror="true" fork="true" classname="org.jmlspecs.jmlrac.Main">
52 	      <jvmarg value="-Xms64m" />
53 	      <jvmarg value="-Xmx128m" />
54 	      <classpath>
55 	        <path refid="jml.classpath" />
56 	      </classpath>
57 	      <arg line="${jml.debug}" />
58 	      <arg line="${jml.warning}" />
59 	      <arg line="${jml.assignable}" />
60 	      <arg line="${jml.recursive}" />
61 	      <arg line="${jml.source_code}" />
62 	      <arg line="${jml.print_source}" />
63 	      <arg line="--classpath ${jml.classpath}" />
64 	      <arg line="--sourcepath ${jml.src}" />
65 	      <arg line="--destination ${jml.rac.src.generated}" />
66 	      <arg line="${jml.src.compile}" />
67 	    </java>
68 	    <copy todir="${jml.rac.src}" includeemptydirs="true">
69 	      <fileset dir="${jml.rac.src.generated}">
70 	        <include name="**/*.java.gen" />
71 	      </fileset>
72 	      <mapper type="glob" from="*.java.gen" to="*.java" />
73 	    </copy>
74 	  </target>
75 	
76 	  <target name="compile_jml_source" depends="generate_jml_source">
77 	    <javac
78 	        destdir="${jml.rac.compiled}"
79 	        srcdir="${jml.rac.src}"
80 	        fork="yes"
81 	        source="1.4"
82 	        target="1.4"
83 	        memorymaximumsize="128m"
84 	        debug="true"
85 	        debuglevel="lines,vars,source"
86 	        verbose="yes"
87 	          listfiles="yes">
88 	      <src path="${jml.rac.src}" />
89 	      <classpath refid="jml.classpath" />
90 	    </javac>
91 	  </target>
92 	</project>
<project basedir="." default="generate_jml_test_source" name="test-jml">
4 	
5 	  <property name="main-project.location" value="../main-project" />
6 	  <property name="spec-project.location" value="../spec-project" />
7 	  <property name="test.jml.project" value="." />
8 	
9 	  <path id="jml-libraries.classpath">
10 	    <pathelement location="${spec-project.location}/lib/jml/jml-release.jar" />
11 	    <pathelement location="${spec-project.location}/lib/jml/specs" />
12 	  </path>
13 	
14 	  <path id="main-project.classpath">
15 	    <pathelement location="${main-project.location}/bin" />
16 	    <pathelement location="${main-project.location}/lib/d2xxj/ftd2xxj.jar" />
17 	    <pathelement location="${main-project.location}/lib/d2xxj/javax.util.property.jar" />
18 	  </path>
19 	
20 	  <path id="jml.classpath">
21 	    <path refid="jml-libraries.classpath" />
22 	    <path refid="main-project.classpath" />
23 	  </path>
24 	  <property name="jml.classpath" refid="jml.classpath" />
25 	
26 	  <property name="jml.src" value="${spec-project.location}/src" />
27 	  <property name="jml.junit.src" value="${test.jml.project}/test.generated" />
28 	
29 	  <property name="jml.src.compile" value="ie.ucd.sensetile"/>
30 	 
31 	  <target name="clean">
32 	    <delete dir="${jml.junit.src}" />
33 	  </target>
34 	 
35 	  <target name="init">
36 	    <mkdir dir="${jml.junit.src}" />
37 	  </target>
38 	 
39 	  <target name="generate_jml_test_source" depends="init">
40 	    <property name="jml.debug" value="--debug" />
41 	    <property name="jml.warning" value="--warning" />
42 	    <property name="jml.recursive" value="--recursive" />
43 	    <property name="jml.source_code" value="--source 1.4" />
44 	    <!--
45 	    <property name="jml.test.generator" value="- - useGenerator" />
46 	    -->
47 	    <property name="jml.test.generator" value="" />
48 	    <property name="jml.test.generator.classname" value="--generatorClassName Generator" />
49 	    <property name="jml.test.generator.packagename" value="--generatorPackageName ie.ucd.sensetile" />
50 	    <java failonerror="true" fork="true" classname="org.jmlspecs.jmlunit.Main">
51 	      <jvmarg value="-Xms64m" />
52 	      <jvmarg value="-Xmx128m" />
53 	      <classpath>
54 	        <path refid="jml.classpath" />
55 	      </classpath>
56 	      <arg line="${jml.debug}" />
57 	      <arg line="${jml.warning}" />
58 	      <arg line="${jml.recursive}" />
59 	      <arg line="${jml.source_code}" />
60 	      <arg line="${jml.test.generator}" />
61 	      <arg line="${jml.test.generator.classname}" />
62 	      <arg line="${jml.test.generator.packagename}" />
63 	      <arg line="--classpath ${jml.classpath}" />
64 	      <arg line="--sourcepath ${jml.src}" />
65 	      <arg line="--destination ${jml.junit.src}" />
66 	      <arg line="${jml.src.compile}" />
67 	    </java>
68 	  </target>
69 	
70 	</project>